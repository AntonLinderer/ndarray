import os
import sys
import lsst.tests
Import("env")
cc_tests = ["ndarray.cc", "ndarray-eigen.cc", "ndarray-fft.cc"]
python_mod = env.LoadableModuleIncomplete("ndarray_python_test", ["ndarray-python-mod.cc"],
                                          LIBS=env.libs[env["eups_product"]])
for src in cc_tests:
    env.Program(src, LIBS=env.libs[env["eups_product"]])

env.CheckSwig("python", ilang="c++", includedProducts="ndarray")

swig_mod = env.LoadableModuleIncomplete("_swig_test_mod", ["swig_test_mod.i"])

#
# Tests
#
import lsst.tests
tests = lsst.tests.Control(env, verbose = True, ignoreList=["ndarray-python-mod.cc"])
tests.run("*.cc")
for test in tests.run("ndarray-python.py"):
    env.Depends(test, python_mod + swig_mod)
